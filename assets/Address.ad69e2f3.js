import{d as b,r,c,e as i,w as u,F as h,o as p,x as w,f as _,b as e,h as a,l as d,g as C,t as f}from"./vendor.83c679c4.js";import{_ as $,V as U,a as k,C as y}from"./index.2c62aea5.js";import{T as g}from"./Table.e5b9d727.js";const E=b({components:{ViewSelector:U,ViewItem:k,Table:g,Combobox:y},data(){return{items:[],columns:[{text:"\u8B58\u5225\u5B50",value:"id"},{text:"\u540D\u79F0",value:"name"},{text:"\u90F5\u4FBF\u756A\u53F7",value:"postal_code"},{text:"\u90FD\u9053\u5E9C\u770C",value:"region"},{text:"\u5E02\u533A\u753A\u6751",value:"locality"},{text:"\u753A\u540D\u4EE5\u964D",value:"street_address"},{text:"\u30DE\u30C3\u30D7URL",value:"map_url"},{text:"",value:"actions"}],id:void 0,edits:[]}},mounted(){this.refresh()},methods:{async refresh(){this.items=await this.$api.get("/address")},async add(){await this.$api.put(`/address/${this.id}`,{}),this.refresh()},cancel(t){const l=this.edits.indexOf(t);l>=0&&this.edits.splice(l,1)},async save(t,l){await this.$api.put(`/address/${t}`,l),this.cancel(t),this.refresh()},async remove(t){await this.$api.delete(`/address/${t}`),this.refresh()}}}),F=["onUpdate:modelValue"],A=["onUpdate:modelValue"],D=["onUpdate:modelValue"],T=["onUpdate:modelValue"],B=["onUpdate:modelValue"],x=["onUpdate:modelValue"],j=["onUpdate:modelValue"],I=["onClick"],N=["onClick"],S=["onClick"],L=["onClick"],q=e("h1",null,"Address",-1),z=["href"],G=e("iframe",{src:"https://www.google.com/maps/d/embed?mid=14f9fIlAmbAIGiKuETnPyWylfrwEqY2li&ehbc=2E312F",width:"640",height:"480"},null,-1);function K(t,l,M,O,P,R){const v=r("view-selector"),V=r("Table"),m=r("view-item");return p(),c(h,null,[i(v,{items:[{name:"table"}]}),i(m,{name:"table"},{default:u(()=>[i(V,{columns:t.columns,items:t.items},w({"header.actions":u(()=>[e("button",{onClick:l[0]||(l[0]=(...o)=>t.refresh&&t.refresh(...o))},"refresh")]),"item.map_url":u(({value:o})=>[C(f(o&&`${o.slice(0,10)}...`),1)]),"item.actions":u(({item:o})=>[e("button",{onClick:s=>t.edits.push(o.id)},"edit",8,S),e("button",{onClick:s=>t.remove(o.id)},"remove",8,L)]),tfoot:u(()=>[a(e("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>t.id=o)},null,512),[[d,t.id]]),e("button",{onClick:l[2]||(l[2]=(...o)=>t.add&&t.add(...o))},"add")]),_:2},[_(t.edits,o=>({name:`row.${o}`,fn:u(({item:s})=>[e("tr",null,[e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.id=n},null,8,F),[[d,s.id,void 0,{lazy:!0}]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.name=n},null,8,A),[[d,s.name]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.postal_code=n},null,8,D),[[d,s.postal_code]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.region=n},null,8,T),[[d,s.region]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.locality=n},null,8,B),[[d,s.locality]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.street_address=n},null,8,x),[[d,s.street_address]])]),e("td",null,[a(e("input",{"onUpdate:modelValue":n=>s.map_url=n},null,8,j),[[d,s.map_url]])]),e("td",null,[e("button",{onClick:n=>t.save(o,s)},"save",8,I),e("button",{onClick:n=>t.cancel(o)},"cancel",8,N)])])])}))]),1032,["columns","items"])]),_:1}),i(m,null,{default:u(()=>[q,(p(!0),c(h,null,_(t.items,o=>(p(),c("div",null,[e("a",{href:`/address/${o.id}`},f(o.name),9,z)]))),256)),G]),_:1})],64)}var J=$(E,[["render",K]]);export{J as default};
