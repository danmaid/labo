var h=Object.defineProperty;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var l=(t,e,s)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,c=(t,e)=>{for(var s in e||(e={}))p.call(e,s)&&l(t,s,e[s]);if(r)for(var s of r(e))f.call(e,s)&&l(t,s,e[s]);return t};import{_ as m}from"./index.2c62aea5.js";import{v as k}from"./v4.055dd912.js";import{d as $,c as i,b as n,F as u,f as v,o as d,t as C}from"./vendor.83c679c4.js";const y=$({data(){return{items:[],edits:[]}},mounted(){this.refresh()},methods:{async refresh(){const t=new Headers;t.append("Accept","application/json");const e=await fetch(this.$route.path,{headers:t}).then(s=>s.json());this.items=e.map(s=>c({url:`${this.$route.path}/${s.id}`},s))},async remove(t){const{ok:e}=await fetch(t.url,{method:"DELETE"});if(e){const s=this.items.indexOf(t);s>=0&&this.items.splice(s,1)}},edit(t){this.edits.push(t)},cancel(t){const e=this.edits.indexOf(t);e>=0&&this.edits.splice(e,1)},add(){const t=k(),e={url:`${this.$route.path}/${t}`};this.items.push(e),this.edits.push(e)},async save(t){const e=new Headers;e.append("Content-Type","application/json"),e.append("Accept","application/json");const s=JSON.stringify(t);await fetch(t.url,{method:"PUT",headers:e,body:s})}}}),b=n("th",null,"\u540D\u79F0",-1),_=n("td",null,[n("input",{type:"text"})],-1),j=["onClick"],w=["onClick"],E={key:1},g=["onClick"],B=["onClick"];function D(t,e,s,F,O,T){return d(),i("table",null,[n("thead",null,[n("tr",null,[b,n("th",null,[n("button",{onClick:e[0]||(e[0]=(...o)=>t.add&&t.add(...o))},"add"),n("button",{onClick:e[1]||(e[1]=(...o)=>t.refresh&&t.refresh(...o))},"refresh")])])]),n("tbody",null,[(d(!0),i(u,null,v(t.items,o=>(d(),i(u,null,[t.edits.includes(o)?(d(),i("tr",{key:o.url},[_,n("td",null,[n("button",{onClick:a=>t.save(o)},"save",8,j),n("button",{onClick:a=>t.cancel(o)},"cancel",8,w)])])):(d(),i("tr",E,[n("td",null,C(o.test),1),n("td",null,[n("button",{onClick:a=>t.edit(o)},"edit",8,g),n("button",{onClick:a=>t.remove(o)},"remove",8,B)])]))],64))),256))])])}var S=m(y,[["render",D]]);export{S as default};
