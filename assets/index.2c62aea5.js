var j=Object.defineProperty;var I=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var V=(e,t,s)=>(I(e,typeof t!="symbol"?t+"":t,s),s);import{d as w,a as k,r as b,c as i,b as o,e as c,w as m,F as f,f as y,g as u,o as l,h as A,v as F,t as $,i as O,j as S,k as D,l as T,m as U,n as M,p as x,q as N,s as P,u as q}from"./vendor.83c679c4.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const _ of d)if(_.type==="childList")for(const n of _.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function s(d){const _={};return d.integrity&&(_.integrity=d.integrity),d.referrerpolicy&&(_.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?_.credentials="include":d.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function a(d){if(d.ep)return;d.ep=!0;const _=s(d);fetch(d.href,_)}};H();const z="modulepreload",L={},J="/",h=function(t,s){return!s||s.length===0?t():Promise.all(s.map(a=>{if(a=`${J}${a}`,a in L)return;L[a]=!0;const d=a.endsWith(".css"),_=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${_}`))return;const n=document.createElement("link");if(n.rel=d?"stylesheet":z,d||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),d)return new Promise((p,C)=>{n.addEventListener("load",p),n.addEventListener("error",C)})})).then(()=>t())};var g=(e,t)=>{const s=e.__vccOpts||e;for(const[a,d]of t)s[a]=d;return s};const W=w({components:{Auth:k(()=>h(()=>import("./Auth.069581cf.js"),["assets/Auth.069581cf.js","assets/vendor.83c679c4.js"]))}}),K={style:{position:"absolute",top:"8px",right:"8px"}},G=u("Home"),Q=u(" | "),X=u("About"),Y=u(" | "),Z=u("Room"),ee=u(" | "),te=u("RoomTimeline"),oe=u(" | "),se=u("Course"),ne=u(" | "),re=u("Class"),ie=u(" | "),le=u("Experiment"),ue=u(" | "),de=u("Schedules"),ae=u(" | "),ce=u("Resource"),pe=u(" | "),_e=u("User"),he=u(" | "),me=u("Column"),fe=u(" | "),ve=u("Role"),$e=u(" | "),ye=u("Department"),be=u(" | "),Ee=u("Address"),Ae=u(" \u30A2\u30AF\u30BB\u30B9\u8A31\u53EF(scope) "),ge=o("input",{id:"public",type:"checkbox",disabled:"",checked:""},null,-1),Ce=o("label",{for:"public"},"public",-1),Ve=["onUpdate:modelValue","id"],we=["for"];function Se(e,t,s,a,d,_){const n=b("Auth"),p=b("router-link"),C=b("router-view");return l(),i(f,null,[o("aside",K,[c(n)]),o("div",null,[c(p,{to:"/"},{default:m(()=>[G]),_:1}),Q,c(p,{to:"/about"},{default:m(()=>[X]),_:1}),Y,c(p,{to:"/rooms"},{default:m(()=>[Z]),_:1}),ee,c(p,{to:"/room-timeline"},{default:m(()=>[te]),_:1}),oe,c(p,{to:"/courses"},{default:m(()=>[se]),_:1}),ne,c(p,{to:"/class"},{default:m(()=>[re]),_:1}),ie,c(p,{to:"/experiments"},{default:m(()=>[le]),_:1}),ue,c(p,{to:"/schedules"},{default:m(()=>[de]),_:1}),ae,c(p,{to:"/resource"},{default:m(()=>[ce]),_:1}),pe,c(p,{to:"/user"},{default:m(()=>[_e]),_:1}),he,c(p,{to:"/column"},{default:m(()=>[me]),_:1}),fe,c(p,{to:"/role"},{default:m(()=>[ve]),_:1}),$e,c(p,{to:"/department"},{default:m(()=>[ye]),_:1}),be,c(p,{to:"/address"},{default:m(()=>[Ee]),_:1})]),o("div",null,[Ae,ge,Ce,(l(!0),i(f,null,y(e.$scope,(R,E)=>(l(),i(f,null,[A(o("input",{"onUpdate:modelValue":r=>e.$scope[E]=r,id:E,type:"checkbox"},null,8,Ve),[[F,e.$scope[E]]]),o("label",{for:E},$(E),9,we)],64))),256))]),c(C)],64)}var ke=g(W,[["render",Se]]);const De=w({props:{items:{type:Array,default:()=>[]}},computed:{selected:{get(){var e;return(e=this.$route.query.view)==null?void 0:e.toString()},set(e){this.$router.replace({query:{view:e}})}},views(){return this.items.filter(e=>!e.scope||this.$scope.hasScope(e.scope)).map(e=>e.name)}},watch:{views(){this.noScopeRedirect()}},beforeMount(){this.noScopeRedirect()},methods:{noScopeRedirect(){this.selected&&!this.views.includes(this.selected)&&(this.selected=void 0)}}}),Re={key:0},Oe=o("label",{for:"default"},"default",-1),Te=["id","value"],Pe=["for"];function Le(e,t,s,a,d,_){return e.views.length>0?(l(),i("div",Re,[A(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.selected=n),type:"radio",name:"view-selector",id:"default",value:void 0},null,512),[[O,e.selected]]),Oe,(l(!0),i(f,null,y(e.views,n=>(l(),i(f,null,[A(o("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>e.selected=p),type:"radio",name:"view-selector",id:n,value:n},null,8,Te),[[O,e.selected]]),o("label",{for:n},$(n),9,Pe)],64))),256))])):S("",!0)}var Be=g(De,[["render",Le]]);const je=w({props:{name:{type:String}},computed:{selected(){var e;return(e=this.$route.query.view)==null?void 0:e.toString()}}});function Ie(e,t,s,a,d,_){return e.name===e.selected?D(e.$slots,"default",{key:0}):S("",!0)}var Fe=g(je,[["render",Ie]]);let Ue=0;const Me=w({props:{modelValue:{type:String},list:{type:Array,default:()=>[]},id:{type:String,default:()=>`combobox-${Ue++}`}},emits:["update:modelValue"],data(){return{value:this.modelValue}},watch:{value(e){this.$emit("update:modelValue",e)},modelValue(e){e!==this.value&&(this.value=e)}}}),xe=["list"],Ne=["id"];function qe(e,t,s,a,d,_){return l(),i("div",null,[A(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.value=n),list:e.id},null,8,xe),[[T,e.value]]),o("datalist",{id:e.id},[(l(!0),i(f,null,y(e.list,n=>(l(),i("option",null,$(n),1))),256))],8,Ne)])}var He=g(Me,[["render",qe]]);let ze=0;const Je=w({props:{label:{type:String},items:{type:Array},id:{type:String,default:()=>`select-${++ze}`},modelValue:{type:String}},emits:["update:modelValue"],data(){return{value:this.modelValue}},watch:{modelValue(e){e!==this.value&&(this.value=e)},value(e){this.$emit("update:modelValue",e)}}}),We=["for"],Ke=["id"],Ge=["value"];function Qe(e,t,s,a,d,_){return l(),i(f,null,[o("label",{for:e.id},$(e.label),9,We),A(o("select",{id:e.id,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value=n)},[(l(!0),i(f,null,y(e.items,n=>(l(),i("option",{value:n.value},$(n.text),9,Ge))),256))],8,Ke),[[U,e.value]])],64)}var Xe=g(Je,[["render",Qe]]);const Ye=w({name:"Home",components:{Snow:k(()=>h(()=>import("./Snow.33bb3f78.js"),["assets/Snow.33bb3f78.js","assets/Snow.b613c000.css","assets/vendor.83c679c4.js"])),Memo:k(()=>h(()=>import("./Memo.210dd3bb.js"),["assets/Memo.210dd3bb.js","assets/vendor.83c679c4.js","assets/v4.055dd912.js"])),ViewSelector:Be,ViewItem:Fe,Combobox:He,Select:Xe},data(){return{columns:[{text:"\u30EA\u30BD\u30FC\u30B9",value:"resource"},{text:"\u8B58\u5225\u5B50",value:"id"},{text:"\u540D\u79F0",value:"name"},{text:"\u5217\u30EA\u30B9\u30C8",value:"columns"},{text:"\u984C\u540D",value:"title"},{text:"\u5024",value:"value"},{text:"\u5BFE\u8C61",value:"target"},{text:"scopes",value:"scopes"},{text:"roles",value:"roles"},{text:"\u8272",value:"color",inputType:"color"},{text:"\u6559\u5BA4",value:"departments",scope:"read"},{text:"\u7D44",value:"class",scope:"read"},{text:"\u30B9\u30B1\u30B8\u30E5\u30FC\u30EB",value:"schedules"},{text:"\u6982\u8981",value:"summary"},{text:"\u5B9A\u7FA9",value:"definition"},{text:"refs",value:"refs",scope:"dev"},{text:"source",value:"source",scope:"dev"},{text:"\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8",value:"template"}],items:[],edits:[],resources:[],resource:"",summary:[],ss:void 0}},computed:{scopedColumns(){return this.columns.filter(e=>!e.scope||this.$scope.hasScope(e.scope))}},mounted(){this.refresh()},methods:{async refresh(){this.items=await this.$api.get("/"),this.getResources(),this.summary=await this.$api.get("/index.json")},async add(e){const t=await this.$api.post(`/${e}`,{});console.log(t),this.refresh()},edit(e){this.edits.push(e)},cancel(e){const t=this.edits.indexOf(e);t>=0&&this.edits.splice(t,1)},async save(e){this.$api.put(`/${e.resource}/${e.id}`,e);const t=this.edits.indexOf(e);t>=0&&this.edits.splice(t,1)},async remove(e){if(await this.$api.delete(`/${e.resource}/${e.id}`)){const s=this.items.indexOf(e);s>=0&&this.items.splice(s,1)}},async getResources(){this.resources=await this.$api.get("/resource")}}}),Ze=o("caption",null," \u30B5\u30DE\u30EA ",-1),et=o("th",null,"\u30EA\u30BD\u30FC\u30B9",-1),tt=o("th",null,"\u30B5\u30A4\u30BA",-1),ot=["onClick"],st=o("caption",null," \u30C7\u30FC\u30BF ",-1),nt={key:0,style:{"font-weight":"initial","font-size":"0.5em"}},rt={key:1,style:{"font-weight":"initial","font-style":"italic","font-size":"0.5em"}},it=["onUpdate:modelValue","type"],lt=["onClick"],ut=["onClick"],dt={key:1},at={style:{"border-bottom":"1px solid","border-right":"1px solid"}},ct=["onClick"],pt=["onClick"],_t={class:"home",style:{position:"relative"}},ht={class:"contents"};function mt(e,t,s,a,d,_){const n=b("view-selector"),p=b("Select"),C=b("view-item"),R=b("Snow"),E=b("Memo");return l(),i(f,null,[c(n,{items:[{name:"table"}]}),c(C,{name:"table"},{default:m(()=>[c(p,{modelValue:e.ss,"onUpdate:modelValue":t[0]||(t[0]=r=>e.ss=r),items:[{value:"a",text:"1"},{value:"B",text:"2"}]},null,8,["modelValue"]),o("table",null,[Ze,o("thead",null,[et,tt,o("th",null,[o("button",{onClick:t[1]||(t[1]=(...r)=>e.refresh&&e.refresh(...r))},"refresh")])]),o("tbody",null,[(l(!0),i(f,null,y(e.summary,r=>(l(),i("tr",null,[o("td",null,$(r.resource),1),o("td",null,$(r.size),1),o("td",null,[o("button",{onClick:v=>e.add(r.resource)},"add",8,ot)])]))),256))]),o("tfoot",null,[o("tr",null,[o("td",null,[A(o("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>e.resource=r)},null,512),[[T,e.resource]])]),o("td",null,[o("button",{onClick:t[3]||(t[3]=r=>e.add(e.resource))},"add")])])])]),o("table",null,[st,o("thead",null,[o("tr",null,[(l(!0),i(f,null,y(e.scopedColumns,r=>(l(),i("th",null,[o("div",null,$(r.text),1),e.$scope.dev?(l(),i("div",nt,$(r.value),1)):S("",!0),e.$scope.dev?(l(),i("div",rt,$(r.scope),1)):S("",!0)]))),256)),o("th",null,[o("button",{onClick:t[4]||(t[4]=(...r)=>e.refresh&&e.refresh(...r))},"refresh")])])]),o("tbody",null,[(l(!0),i(f,null,y(e.items,r=>(l(),i(f,null,[e.edits.includes(r)?(l(),i("tr",{key:`/${r.resource}/${r.id}`},[(l(!0),i(f,null,y(e.scopedColumns,v=>(l(),i("td",null,[D(e.$slots,`edit.${v.value}`,{item:r,value:r[v.value]},()=>[A(o("input",{"onUpdate:modelValue":B=>r[v.value]=B,type:v.inputType},null,8,it),[[M,r[v.value]]])])]))),256)),o("td",null,[o("button",{onClick:v=>e.save(r)},"save",8,lt),o("button",{onClick:v=>e.cancel(r)},"cancel",8,ut)])])):(l(),i("tr",dt,[(l(!0),i(f,null,y(e.scopedColumns,v=>(l(),i("td",at,[D(e.$slots,`item.${v.value}`,{},()=>[u($(r[v.value]),1)])]))),256)),o("td",null,[e.$scope.write?(l(),i("button",{key:0,onClick:v=>e.edit(r)},"edit",8,ct)):S("",!0),e.$scope.write?(l(),i("button",{key:1,onClick:v=>e.remove(r)},"remove",8,pt)):S("",!0)])]))],64))),256))])])]),_:3}),c(C,null,{default:m(()=>[o("div",_t,[c(R,{style:{position:"absolute","z-index":"-1"}}),o("div",ht,[c(E)])])]),_:1})],64)}var ft=g(Ye,[["render",mt]]);const vt={},$t={class:"about"},yt=o("h1",null,"This is an about page",-1),bt=[yt];function Et(e,t){return l(),i("div",$t,bt)}var At=g(vt,[["render",Et]]);const gt=[{path:"/",component:ft},{path:"/about",component:At},{path:"/rooms",component:()=>h(()=>import("./Rooms.975d38d9.js"),["assets/Rooms.975d38d9.js","assets/v4.055dd912.js","assets/vendor.83c679c4.js"])},{path:"/room-timeline",component:()=>h(()=>import("./RoomTimeline.d1e4583d.js"),["assets/RoomTimeline.d1e4583d.js","assets/vendor.83c679c4.js"])},{path:"/class",component:()=>h(()=>import("./Class.47c0e72d.js"),["assets/Class.47c0e72d.js","assets/vendor.83c679c4.js","assets/EditableTable.74919d12.js","assets/v4.055dd912.js","assets/Table.e5b9d727.js"])},{path:"/courses",component:()=>h(()=>import("./Courses.476493fc.js"),["assets/Courses.476493fc.js","assets/EditableTable.74919d12.js","assets/vendor.83c679c4.js","assets/v4.055dd912.js"])},{path:"/experiments",component:()=>h(()=>import("./Experiments.4ff7d129.js"),["assets/Experiments.4ff7d129.js","assets/vendor.83c679c4.js","assets/EditableTable.74919d12.js","assets/v4.055dd912.js"])},{path:"/schedules",component:()=>h(()=>import("./Schedules.fdbf584b.js"),["assets/Schedules.fdbf584b.js","assets/EditableTable.74919d12.js","assets/vendor.83c679c4.js","assets/v4.055dd912.js"])},{path:"/resource",component:()=>h(()=>import("./EditableTable.74919d12.js"),["assets/EditableTable.74919d12.js","assets/vendor.83c679c4.js","assets/v4.055dd912.js"]),props:{columns:[{text:"resource",value:"resource"},{text:"id",value:"id"}]}},{path:"/user",component:()=>h(()=>import("./User.e86b5ebe.js"),["assets/User.e86b5ebe.js","assets/vendor.83c679c4.js","assets/EditableTable.74919d12.js","assets/v4.055dd912.js","assets/Table.e5b9d727.js"])},{path:"/column",component:()=>h(()=>import("./Column.b41cf628.js"),["assets/Column.b41cf628.js","assets/EditableTable.74919d12.js","assets/vendor.83c679c4.js","assets/v4.055dd912.js"])},{path:"/role",component:()=>h(()=>import("./Role.40b63023.js"),["assets/Role.40b63023.js","assets/Table.e5b9d727.js","assets/vendor.83c679c4.js"])},{path:"/department",component:()=>h(()=>import("./Department.935912de.js"),["assets/Department.935912de.js","assets/vendor.83c679c4.js","assets/Table.e5b9d727.js"])},{path:"/department/:id",component:()=>h(()=>import("./DepartmentDetail.0f367a23.js"),["assets/DepartmentDetail.0f367a23.js","assets/vendor.83c679c4.js"])},{path:"/address",component:()=>h(()=>import("./Address.ad69e2f3.js"),["assets/Address.ad69e2f3.js","assets/vendor.83c679c4.js","assets/Table.e5b9d727.js"])},{path:"/address/:id",component:()=>h(()=>import("./AddressDetail.85d77a55.js"),["assets/AddressDetail.85d77a55.js","assets/vendor.83c679c4.js"])}],Ct=x({history:N(),routes:gt});class Vt{constructor(){V(this,"headers",new Headers({Accept:"application/json","Content-Type":"application/json"}))}async get(t){return fetch(t,{headers:this.headers}).then(s=>s.json())}async put(t,s){return fetch(t,{method:"PUT",headers:this.headers,body:JSON.stringify(s)}).then(a=>a.ok)}async delete(t){return fetch(t,{method:"DELETE",headers:this.headers}).then(s=>s.ok)}async post(t,s){return fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(s)}).then(a=>a.json())}}const wt={install:e=>{e.config.globalProperties.$api=new Vt}};class St{constructor(){V(this,"read",!1);V(this,"write",!1);V(this,"dev",!1)}hasScope(t){return t?t==="read"?this.read:t==="write"?this.write:t==="dev"?this.dev:!1:this.read||this.write||this.dev}}const kt={install:e=>{e.config.globalProperties.$scope=P(new St)}};class Dt extends Map{constructor(){super(...arguments);V(this,"scopes",[])}has(t){return this.hasScope(t)||super.has(t)}hasScope(t){return this.scopes.includes(t)}}const Rt={install:e=>{e.config.globalProperties.$auth=P(new Dt)}};q(ke).use(Ct).use(wt).use(kt).use(Rt).mount("#app");export{He as C,Xe as S,Be as V,g as _,Fe as a,h as b};
