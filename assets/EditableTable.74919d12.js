var f=Object.defineProperty;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var p=(e,t,i)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c=(e,t)=>{for(var i in t||(t={}))k.call(t,i)&&p(e,i,t[i]);if(h)for(var i of h(t))y.call(t,i)&&p(e,i,t[i]);return e};import{d as b,c as l,b as n,t as u,F as d,f as r,o as a,k as $,h as C,n as m,g}from"./vendor.83c679c4.js";import{_ as V}from"./index.2c62aea5.js";import{v as j}from"./v4.055dd912.js";const w=b({props:{columns:{type:Array},caption:{type:String}},data(){return{items:[],edits:[]}},mounted(){this.refresh()},methods:{async refresh(){const e=await this.$api.get(this.$route.path);this.items=e.map(t=>c({url:`${this.$route.path}/${t.id}`},t))},async remove(e){if(await this.$api.delete(`${this.$route.path}/${e.id}`)){const i=this.items.indexOf(e);i>=0&&this.items.splice(i,1)}},edit(e){this.edits.push(e)},cancel(e){const t=this.edits.indexOf(e);t>=0&&this.edits.splice(t,1)},add(){const t={id:j()};this.items.push(t),this.edits.push(t)},async save(e){this.$api.put(`${this.$route.path}/${e.id}`,e);const t=this.edits.indexOf(e);t>=0&&this.edits.splice(t,1)}}}),B=["onUpdate:modelValue","type"],D=["onClick"],O=["onClick"],S={key:1},T=["href"],E=["onClick"],F=["onClick"];function N(e,t,i,U,_,A){return a(),l("table",null,[n("caption",null,u(e.caption),1),n("thead",null,[n("tr",null,[(a(!0),l(d,null,r(e.columns,s=>(a(),l("th",null,u(s.text),1))),256)),n("th",null,[n("button",{onClick:t[0]||(t[0]=(...s)=>e.add&&e.add(...s))},"add"),n("button",{onClick:t[1]||(t[1]=(...s)=>e.refresh&&e.refresh(...s))},"refresh")])])]),n("tbody",null,[(a(!0),l(d,null,r(e.items,s=>(a(),l(d,null,[e.edits.includes(s)?(a(),l("tr",{key:s.id},[(a(!0),l(d,null,r(e.columns,o=>(a(),l("td",null,[$(e.$slots,`edit.${o.value}`,{item:s,value:s[o.value]},()=>[C(n("input",{"onUpdate:modelValue":v=>s[o.value]=v,type:o.inputType},null,8,B),[[m,s[o.value]]])])]))),256)),n("td",null,[n("button",{onClick:o=>e.save(s)},"save",8,D),n("button",{onClick:o=>e.cancel(s)},"cancel",8,O)])])):(a(),l("tr",S,[(a(!0),l(d,null,r(e.columns,o=>(a(),l("td",null,[$(e.$slots,`item.${o.value}`,{item:s,value:s[o.value]},()=>[g(u(s[o.value]),1)])]))),256)),n("td",null,[n("a",{href:`${e.$route.path}/${s.id}`},"detail",8,T),n("button",{onClick:o=>e.edit(s)},"edit",8,E),n("button",{onClick:o=>e.remove(s)},"remove",8,F)])]))],64))),256))])])}var G=V(w,[["render",N]]);export{G as default};
